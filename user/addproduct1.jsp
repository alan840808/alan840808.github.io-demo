<!-- Step 0: import library --><%@ page import = "java.sql.*, java.util.*"%><%@ page language="java" contentType="text/html; charset=UTF-8"    pageEncoding="UTF-8"%><html><head><title>新增產品</title></head><body><%try {//Step 1: 載入資料庫驅動程式     Class.forName("com.mysql.jdbc.Driver");    try {//Step 2: 建立連線 	                 String url="jdbc:mysql://localhost/demo?useUnicode=true&useJDBCCompliantTimezoneShift=true&useLegacyDatetimeCode=false&serverTimezone=UTC";        String sql="";        Connection con=DriverManager.getConnection(url,"root","1234");        if(con.isClosed())           out.println("連線建立失敗");        else {//Step 3: 選擇資料庫              sql="use demo";           con.createStatement().execute(sql);           //從表格傳遞中文到資料庫, 必須使用getBytes("ISO-8859-1")編碼           String new_productpic=new String(request.getParameter("productpic").getBytes("ISO-8859-1"),"UTF-8");		   String new_productamount=request.getParameter("productamount");           String new_productname=new String(request.getParameter("productname").getBytes("ISO-8859-1"),"UTF-8");		   String new_productnote=new String(request.getParameter("productnote").getBytes("ISO-8859-1"),"UTF-8");		   String new_productsize=new String(request.getParameter("productsize").getBytes("ISO-8859-1"),"UTF-8");		   String new_productprice=request.getParameter("productprice");		   		   		   //Step 4: 執行 SQL 指令	int a=Integer.parseInt(new_productpic);if(a<=26)        {            String productpic = Integer.toString(a);            sql="update product set productamount='"+new_productamount+"', " ;            sql+="productnote='"+new_productnote+"', ";            sql+="productname='"+new_productname+"', ";            sql+="productprice='"+new_productprice+"', ";            sql+="productsize='"+new_productsize+"' ";            sql+="WHERE productpic ='"+productpic+"' " ;  		           }                                                else{           String productpic = Integer.toString(a);           sql="insert product (productpic, productamount, productname, productnote, productsize, productprice) ";           sql+="value ('" + productpic + "', ";           sql+="'"+new_productamount+"', ";           sql+="'"+new_productname+"', ";           sql+="'"+new_productnote+"', ";           sql+="'"+new_productsize+"', ";    		              sql+="'"+new_productprice+"')";                         }                                                                             con.createStatement().execute(sql);//Step 6: 關閉連線           con.close();//Step 5: 顯示結果          //直接顯示最新的資料           response.sendRedirect("adminproduct.jsp");       }    }    catch (SQLException sExec) {           out.println("SQL錯誤"+sExec.toString());    }}catch (ClassNotFoundException err) {   out.println("class錯誤"+err.toString());}%></body></html>