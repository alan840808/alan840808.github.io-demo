<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><%@page contentType="text/html;charset=UTF-8" language="java" %><%@ page import = "java.sql.*, java.util.*"%><%@include file="config.jsp"%><html><head>	<title>Final JSP</title></head><body><%    PreparedStatement pstat = null;      ResultSet rs = null;             sql = null;      String op = request.getParameter("op");  		      		          if (op.equals("add")){                  String bm = request.getParameter("bm");          String name=null,price=null;  		String num=null;        sql = "select * from product where product_id=?";          pstat = con.prepareStatement(sql);          pstat.setString(1,bm);          rs = pstat.executeQuery();          if (rs.next()){              name = rs.getString("productname").trim();              price = rs.getString("productprice").trim();  			num=rs.getString("productamount").trim();        }          rs.close();          pstat.close();          int a = Integer.parseInt(num)+1;                sql = "UPDATE product set productamount='"+ a + "' WHERE product_id='"+bm+"'";  				con.createStatement().execute(sql);		out.print("<body background=../picture/bg9.jpg>");		out.print("<script> alert('修改成功！！自動跳回商品管理頁面');location.href='adminproduct.jsp'; </script>");              }  		    if (op.equals("div")){                  String bm = request.getParameter("bm");          String name=null,price=null;  		String num=null;        sql = "select * from product where product_id=?";          pstat = con.prepareStatement(sql);          pstat.setString(1,bm);          rs = pstat.executeQuery();          if (rs.next()){              name = rs.getString("productname").trim();              price = rs.getString("productprice").trim();  			num=rs.getString("productamount").trim();        }          rs.close();          pstat.close();                int a = Integer.parseInt(num);          if(a<=1)         {        sql = "delete from product where product_id=?";          pstat = con.prepareStatement(sql);          pstat.setString(1,bm);          pstat.executeUpdate();          pstat.close();                       con.close();         out.print("<body background=../picture/bg6.jpg>");        out.print("<script> alert('修改成功！！自動跳回商品管理頁面');location.href='adminproduct.jsp'; </script>");          }         else         {        a--;               sql = "UPDATE product set productamount='"+ a + "' WHERE product_id='"+bm+"'";  				con.createStatement().execute(sql);		out.print("<body background=../picture/bg6.jpg>");		out.print("<script> alert('修改成功！！自動跳回商品管理頁面');location.href='adminproduct.jsp'; </script>"); 		}    }                      if (op.equals("del")){           String bm = request.getParameter("bm");           sql = "delete from product where product_id=?";                pstat = con.prepareStatement(sql);          pstat.setString(1,bm);          pstat.executeUpdate();          pstat.close();                       con.close();            		out.print("<body background=../picture/bg6.jpg>");        out.print("<script> alert('修改成功！！自動跳回商品管理頁面');location.href='adminproduct.jsp'; </script>");    }        %></body></html>